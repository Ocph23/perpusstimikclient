<div *ngIf="showModal"
    style="position:fixed; width: 80%; height: 100vh; background-color: rgba(8, 8, 8, 0.582); padding: 20px;z-index: 50;"
    class="overflow-x-hidden overflow-y-auto fixed inset-0 z-1000 outline-none focus:outline-none justify-center flex">
    <div style="width:80%" class="relative w-auto my-6 mx-auto max-w-sm">
        <!--content-->
        <div
            class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
            <!--header-->
            <div class="flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t">
                <h3 class="text-3xl font-semibold">
                    Data Anggota
                </h3>
                <button
                    class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
                    (click)="toggleModal()">
                    <span
                        class="bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none">
                        ×
                    </span>
                </button>
            </div>
            <!--body-->
            <div class="block w-full overflow-x-auto p-5">
                <app-search (TextRequest)="textChanged($event)"></app-search>
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                Nomor Anggota
                            </th>
                            <th>
                                NPM/NID
                            </th>
                            <th>
                                Nama
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="tb-item" *ngFor="let item of anggotas; let i=index" [class.active]="selectedIndex === i" 
                        (click)="setIndex(i, item)">
                            <td>
                                {{item.kodeanggota}}
                            </td>
                            <td>
                                {{item.nomor_induk}}
                            </td>
                            <td>
                                {{item.nama}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--footer-->
            <div class="flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b">
                <button
                    class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" (click)="toggleModal()">
                    Close
                </button>
                <button
                    class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" [disabled]="selectedIndex<0" (click)="selectAnggota()">
                    Pilih
                </button>
            </div>
        </div>
    </div>
</div>

<div *ngIf="showBook"
    style="position:fixed; width: 80%; height: 100vh; background-color: rgba(8, 8, 8, 0.582); padding: 20px;z-index: 50;"
    class="overflow-x-hidden overflow-y-auto fixed inset-0 z-1000 outline-none focus:outline-none justify-center flex">
    <div style="width:80%; height: 70%;" class="relative w-auto my-6 mx-auto max-w-sm">
        <!--content-->
        <div
            class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
            <!--header-->
            <div class="flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t">
                <h3 class="text-3xl font-semibold">
                    Data Buku/Penelitian
                </h3>
                <button
                    class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
                    (click)="toggleBook()">
                    <span
                        class="bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none">
                        ×
                    </span>
                </button>
            </div>
            <!--body-->
            <div class="block w-full overflow-x-auto p-5">
                <app-search (TextRequest)="textBookChanged($event)"></app-search>
                <table class="table" >
                    <thead>
                        <tr>
                            <th>
                               Kode Buku
                            </th>
                            <th>
                                Judul
                            </th>
                            <th>
                                Jenis
                            </th>
                            <th>
                                Penulis
                            </th>
                            <th>
                                Tahun
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="tb-item" *ngFor="let item of books; let i=index" [class.active]="selectedBookIndex === i" 
                        (click)="setBookIndex(i, item)" (dblclick)="selectBook()">
                            <td>
                                {{item.kode}}
                            </td>
                            <td>
                                {{item.judul}}
                            </td>
                            <td>
                                {{item.jenis}}
                            </td>
                            <td>
                                {{item.penulis}}
                            </td>
                            <td>
                                {{item.tahun}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--footer-->
            <div class="flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b">
                <button
                    class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" (click)="toggleBook()">
                    Close
                </button>
                <button
                    class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" [disabled]="selectedBookIndex<0" (click)="selectBook()">
                    Pilih
                </button>
            </div>
        </div>
    </div>
</div>


<div *ngIf="showItem"
    style="position:fixed; width: 80%; height: 100vh; background-color: rgba(8, 8, 8, 0.582); padding: 20px;z-index: 50;"
    class="overflow-x-hidden overflow-y-auto fixed inset-0 z-1000 outline-none focus:outline-none justify-center flex">
    <div style="width:80%" class="relative w-auto my-6 mx-auto max-w-sm">
        <!--content-->
        <div
            class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
            <!--header-->
            <div class="flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t">
                <h3 class="text-3xl font-semibold">
                    Item Buku/Penelitian
                </h3>
                <button
                    class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
                    (click)="toggleItem()">
                    <span
                        class="bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none">
                        ×
                    </span>
                </button>
            </div>
            <!--body-->
            <div class="block w-full overflow-x-auto p-5">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                               Nomor Seri
                            </th>
                            <th>
                                Jenis
                            </th>
                            <th>
                                Keadaan
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="tb-item" *ngFor="let item of book.items; let i=index" [class.active]="selectedItemIndex === i" 
                        (click)="setItemIndex(i, item)" (dblclick)="selectItem()">
                            <td>
                                {{item.nomorseri}}
                            </td>
                            <td>
                                {{item.jenis}}
                            </td>
                            <td>
                                {{item.keadaan}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--footer-->
            <div class="flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b">
                <button
                    class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" (click)="toggleItem()">
                    Close
                </button>
                <button
                    class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                    type="button" [disabled]="selectedItemIndex<0" (click)="selectItem()">
                    Pilih
                </button>
            </div>
        </div>
    </div>
</div>


<div class="flex flex-wrap w-full">
    <div class="relative mt-2 flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white">
        <div class="rounded-t  mb-0 px-4 py-3 border-0">
            <div class="flex flex-wrap items-center">
                <div class="relative w-full px-4 max-w-full flex justify-between">
                    <div class="flex">
                        <div style="margin-right: 40px;">
                            <h3 class="font-semibold text-md text-blueGr|ay-700"> Anggota </h3>
                        </div>
                        <div>
                            <h3 class="font-semibold text-md text-blueGray-700"> : <button
                                    class="text-black font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                                    type="button" (click)="toggleModal()">
                                    <span *ngIf="!Model.anggota || Model.anggota.id<=0 ">Pilih Anggota</span>
                                    <span *ngIf="Model.anggota && Model.anggota.id>0 ">{{Model.anggota.kodeanggota}}/{{Model.anggota.nama}}</span>

                                </button> </h3>
                        </div>
                    </div>
                    <button
                        (click)="simpan()"
                        class="bg-red-600 text-white active:bg-red-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                        type="button">
                        Simpan
                    </button>
                </div>
                <div class="relative w-full px-4 max-w-full flex justify-between">
                    <div class="flex">
                        <div style="margin-right: 40px;">
                            <h3 class="font-semibold text-md text-blueGray-700"> Tanggal </h3>
                        </div>
                        <div>
                            <h3 class="font-semibold text-md text-blueGray-700"> {{Model.tanggal|date:'dd/MM/yyyy'}} </h3>
                        </div>
                    </div>
                </div>
                <div class="relative w-full px-4 max-w-full flex justify-between">
                    <button
                    style="background-color: rgb(85, 119, 85); margin-top: 20px;"
                        (click)="addBook()"
                        class="text-white font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                        type="button">
                        Tambah Buku/Penetilian
                    </button>
                </div>
            </div>
        </div>
        <div  class="block w-full  overflow-x-auto p-5">
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            Nomor Seri
                        </th>
                        <th>
                            Judul
                        </th>
                        <th>
                            Penulis
                        </th>
                        <th>
                            Keadaan
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="tb-item" *ngFor="let item of items; let i=index" >
                        <td>
                            {{item.ItemKarya.nomorseri}}
                        </td>
                        <td>
                            {{item.book.judul}}
                        </td>
                        <td>
                            {{item.book.penulis}}
                        </td>
                        <td>
                            {{item.ItemKarya.keadaan}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>